<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexagon Clump with D3</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<body>
    <script>
        function calculateHexagonCoordinates(n, hexagon_width) {
            const side_length = hexagon_width / 2;
            const height = Math.sqrt(3) * side_length;
            const directions = [
                [1, 0],
                [0.5, Math.sqrt(3)/2],
                [-0.5, Math.sqrt(3)/2],
                [-1, 0],
                [-0.5, -Math.sqrt(3)/2],
                [0.5, -Math.sqrt(3)/2]
            ];

            let coordinates = [[0, 0]];
            if (n === 1) return coordinates;

            let current_hex = 1;
            let k = 1;  // ring number

            while (current_hex < n) {
                let [x, y] = [k * hexagon_width, 0];

                for (let d of directions) {
                    for (let i = 0; i < k; i++) {
                        if (current_hex >= n) break;
                        x += d[0] * hexagon_width;
                        y += d[1] * height;
                        coordinates.push([x, y]);
                        current_hex++;
                    }
                    if (current_hex >= n) break;
                }
                k++;
            }

            return coordinates;
        }

        // Example usage:
        const n = 19;
        const hexagon_width = 10;
        const coords = calculateHexagonCoordinates(n, hexagon_width);
        console.log(coords);

        const height = Math.sqrt(3) * hexagon_width / 2;

        // Optional: Render the hexagons with D3.js
        const svg = d3.select("body").append("svg")
            .attr("width", 500)
            .attr("height", 500);

        svg.selectAll("polygon")
            .data(coords)
            .enter()
            .append("polygon")
            .attr("points", d => {
                const x = d[0], y = d[1];
                return [
                    [x + hexagon_width / 2, y],
                    [x + hexagon_width / 4, y + height / 2],
                    [x - hexagon_width / 4, y + height / 2],
                    [x - hexagon_width / 2, y],
                    [x - hexagon_width / 4, y - height / 2],
                    [x + hexagon_width / 4, y - height / 2]
                ].map(point => point.join(",")).join(" ");
            })
            .attr("stroke", "black")
            .attr("fill", "none");
    </script>
</body>
</html>