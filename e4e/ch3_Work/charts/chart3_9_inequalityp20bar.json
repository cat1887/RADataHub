{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.2.0.json",
    "title": {
      "text": "Gini Coeffecient for P20 Countries 1980-2021",
      "subtitle": ["Source: World Inequality Database", ""],
      "subtitleFontStyle": "italic",
      "subtitleFontSize": 10,
      "anchor": "start",
      "color": "black"
    },
    "data": {
      "url": "https://raw.githubusercontent.com/jhellingsdata/RADataHub/main/e4e/ch3_Work/data/chart3_9_inequalityWID.csv"
    },
    "height": 300,
    "width": 500,
    "params": [
      {
        "name": "yearSelector",
        "value": 2021,
        "bind": {
          "input": "range",
          "min": 1980,
          "max": 2021,
          "step": 1,
          "name": "Year:"
        }
      }
    ],
    "transform": [{"filter": "datum.Year == yearSelector"}],
    "layer": [
      {
        "mark": {"type": "bar", "color": "rgb(128,0,0)", "clip": true},
        "encoding": {
          "x": {
            "field": "Gini",
            "type": "quantitative",
            "title": "Gini Coefficient",
            "scale": {"domain": [0, 0.8]},
            "axis": {
              "ticks": false,
              "labelPadding": 5,
              "labelFontSize": 11,
              "titleFontWeight": "normal",
              "title": null
            }
          },
          "y": {
            "field": "Country",
            "type": "nominal",
            "title": null,
            "axis": {
              "offset": 0,
              "ticks": false,
              "domain": false,
              "labelAngle": 0,
              "labelFontSize": 11,
              "labelPadding": 5
            },
            "sort": {"field": "rank", "order": "descending"}
          },
          "tooltip": [
            {"field": "Country"},
            {"field": "Gini", "title": "Gini Coefficient"},
            {"field": "Year"},
            {"field": "Gini_2021", "title": "Gini Coefficient in 2021"}
          ]
        }
      },
      {
        "mark": {"type": "tick", "thickness": 3, "opacity": 1},
        "encoding": {
          "x": {
            "field": "Gini_2021",
            "type": "quantitative",
            "scale": {"domain": [0, 0.8]}
          },
          "y": {
            "field": "Country",
            "type": "nominal",
            "sort": {"field": "rank", "order": "descending"}
          },
          "color": {"value": "#4a4040"}
        }
      }
    ]
  }