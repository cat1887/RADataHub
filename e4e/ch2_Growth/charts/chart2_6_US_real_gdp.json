{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
      "text": "Real GDP: Annual Percentage Change Q2-Q3 2022",
      "anchor": "start",
      "subtitle": ["Source: Bureau of Economic Analysis", ""],
      "subtitleFontSize": 12,
      "fontSize": 16,
      "subtitleFontStyle": "italic"
    },
    "width": 500,
    "height": 300,
    "data": {
      "url": "https://cdn.jsdelivr.net/npm/us-atlas@3/counties-10m.json",
      "format": {"type": "topojson", "feature": "states"}
    },
    "params": [
          {
                    "name": "hover",
                    "select": {
                      "type": "point",
                      "fields": ["State"],
                      "toggle": true,
                      "on": "mouseover"
                    }
        }],
    "transform": [
      {
        "lookup": "id",
        "from": {
          "data": {
            "url": "https://raw.githubusercontent.com/JamesFKean/RA_Summer/main/data/state_real_q_gdp3.csv"
          },
          "key": "id",
          "fields": ["id", "2022:Q3-:Q4", "State"]
        },
        "default": "-0.00"
      }
    ],
    "projection": {"type": "albersUsa"},
    "mark": {"type": "geoshape", "stroke": "white", "strokeOpacity": 0.6},
    "encoding": {
      "color": {
        "field": "2022:Q3-:Q4",
        "type": "quantitative",
        "scale": {"range": ["darkred", "gold", "green"], "domain": [-0.043, 0, 0.07]},
        "legend": {"title": null, "orient": "top", "format": "%"}
      },
      "opacity": {"condition": {"test": {"param": "hover"}, "value": 1},
                    "value": 0.6
                  },
      "tooltip": [
        {"field": "State"},
        {
          "field": "2022:Q3-:Q4",
          "title": "Real GDP: Annual Percentage Change Q2-Q3 2022",
          "format": ".1%"
        }
      ]
    }
  }